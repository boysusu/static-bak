var q=Object.defineProperty,D=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var k=(n,t,o)=>t in n?q(n,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[t]=o,m=(n,t)=>{for(var o in t||(t={}))I.call(t,o)&&k(n,o,t[o]);if(v)for(var o of v(t))N.call(t,o)&&k(n,o,t[o]);return n},f=(n,t)=>D(n,B(t));import{h as F,j as J,R as e,k as R,r as V,n as x,q as H,D as c,aJ as L,aK as G,aL as A,aM as d,aN as Q,aO as p,aP as U,aQ as W,aR as X,aS as _,aT as z,aU as K,aV as $,A as Y,M as Z,N as ee,O as te,Q as ae,U as re,W as ne,aA as le,X as se}from"./vendor.e9bf98c4.js";import{b as C}from"./index.e0eef415.js";import{F as h}from"./form-item.ae0ac4e5.js";import{c as oe,r as ce}from"./copy-clip.08e8f9de.js";import"./index.664f24f1.js";const O={id:0,name:"",type:"",status:"",index:0};function ie(n,t){switch(n){case"string":return t||"";case"bool":return t?t==="true":!1;case"select":return t||"";case"number":return t?parseInt(t):0}}const ue=[{name:"name",label:"Virtual path",type:"string",required:!0},{name:"index",label:"index",type:"number",required:!0,description:"for sort"}],Ce=()=>{const n=F(),{t}=J(),[o,T]=e.useState([]),[b,w]=e.useState({}),[l,i]=e.useState(O),[y,g]=e.useState(!1),[M,S]=e.useState(!1),u=R(),P=()=>{C.get("drivers").then(a=>{const r=a.data;r.code!==200?n({title:t(r.message),status:"error",duration:3e3,isClosable:!0}):w(r.data)})},E=()=>{S(!0),C.get("accounts").then(a=>{S(!1);const r=a.data;r.code!==200?n({title:t(r.message),status:"error",duration:3e3,isClosable:!0}):T(r.data)})};return V.exports.useEffect(()=>{E(),P()},[]),e.createElement(x,{w:"full"},e.createElement(H,null,e.createElement(c,{onClick:()=>{i(O),g(!1),u.onOpen()}},t("Add")),e.createElement(c,{colorScheme:"orange",isLoading:M,onClick:()=>{E()}},t("Refresh"))),e.createElement(x,{overflowX:"auto"},e.createElement(L,{w:"full"},e.createElement(G,null,e.createElement(A,null,e.createElement(d,null,t("Virtual path")),e.createElement(d,null,t("type")),e.createElement(d,null,t("root_folder")),e.createElement(d,null,t("index")),e.createElement(d,null,t("status")),e.createElement(d,null,t("operation")))),e.createElement(Q,null,o.map(a=>e.createElement(A,{key:a.id},e.createElement(p,null,a.name),e.createElement(p,null,a.type),e.createElement(p,null,a.root_folder),e.createElement(p,null,a.index),e.createElement(p,null,a.status),e.createElement(p,{whiteSpace:"nowrap"},e.createElement(c,{onClick:()=>{i(a),g(!0),u.onOpen()}},t("Edit")),e.createElement(c,{ml:1,colorScheme:"green",onClick:()=>{const r=JSON.stringify(a,(s,j)=>{if(s!=="id")return j},2);oe(r),n({title:t("Copied"),status:"success",duration:3e3,isClosable:!0})}},t("Copy")),e.createElement(U,null,e.createElement(W,null,e.createElement(c,{ml:"1",colorScheme:"red"},t("Delete"))),e.createElement(X,{whiteSpace:"normal"},e.createElement(_,null),e.createElement(z,null),e.createElement(K,null,t("Confirmation!")),e.createElement($,null,e.createElement(Y,{mb:"1"},t('Are you sure you want to delete "{{name}}" ?',{name:a.name})),e.createElement(c,{colorScheme:"red",onClick:()=>{C.delete("account",{params:{id:a.id}}).then(r=>{const s=r.data;s.code!==200?n({title:t(s.message),status:"error",duration:3e3,isClosable:!0}):(n({title:t(s.message),status:"success",duration:3e3,isClosable:!0}),E())})}},t("Confirm"))))))))))),e.createElement(Z,{isOpen:u.isOpen,onClose:u.onClose,size:"6xl"},e.createElement(ee,null),e.createElement(te,null,e.createElement(ae,null,t(y?"Save":"Add")),e.createElement(re,null),e.createElement(ne,{pb:6},e.createElement(le,{minChildWidth:"250px",spacing:"2"},e.createElement(h,{type:"select",readOnly:y,required:!0,label:t("type"),value:l.type,values:Object.keys(b),onChange:a=>{const r=m({},l);r.type=a;for(const s of b[a])Object.keys(r).includes(s.name)||(r[s.name]=ie(s.type,s.default));i(r)}}),ue.map(a=>{var r;return e.createElement(h,{key:a.name,type:a.type,label:a.label,value:l[a.name],description:a.description,required:a.required,values:(r=a.values)==null?void 0:r.split(","),onChange:s=>{a.type!=="bool"?i(f(m({},l),{[a.name]:s})):i(f(m({},l),{[a.name]:!l[a.name]}))}})}),l.type&&b[l.type].map(a=>{var r;return e.createElement(h,{key:a.name,type:a.type,label:a.label,value:l[a.name],description:a.description,required:a.required,values:(r=a.values)==null?void 0:r.split(","),onChange:s=>{a.type!=="bool"?i(f(m({},l),{[a.name]:s})):i(f(m({},l),{[a.name]:!l[a.name]}))}})}))),e.createElement(se,null,e.createElement(c,{mr:3,colorScheme:"gray",onClick:u.onClose},t("Cancel")),e.createElement(c,{mr:3,colorScheme:"green",onClick:()=>{ce().then(a=>{try{const r=JSON.parse(a);l.id&&(r.id=l.id),i(r)}catch(r){n({title:t("Invalid JSON"),status:"error",duration:3e3,isClosable:!0})}})}},t("Paste")),e.createElement(c,{onClick:()=>{console.log(l),C.post(`account/${y?"save":"create"}`,l).then(a=>{const r=a.data;r.code!==200?(n({title:t(r.message),status:"error",duration:3e3,isClosable:!0}),!y&&r.code!==400&&(E(),u.onClose())):(n({title:t(r.message),status:"success",duration:3e3,isClosable:!0}),E(),u.onClose())})}},t("Save"))))))};export{Ce as default};
